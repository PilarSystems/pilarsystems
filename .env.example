# ============================================
# PILAR SYSTEMS - Environment Variables
# ============================================
# Copy this file to .env.local and fill in all values
# NEVER commit .env.local or .env with real secrets!
#
# Quick Start:
#   1. cp .env.example .env.local
#   2. Fill in required values (marked with REQUIRED)
#   3. yarn install && npx prisma generate && npx prisma migrate dev
#   4. yarn dev
#
# See Freddi.md for detailed setup instructions.

# ============================================
# DATABASE (REQUIRED)
# ============================================
# PostgreSQL connection string
# Get from: Supabase Dashboard → Project Settings → Database → Connection String
DATABASE_URL=postgresql://postgres.[ref]:[password]@aws-0-[region].pooler.supabase.com:6543/postgres

# ============================================
# SUPABASE AUTH (REQUIRED)
# ============================================
# Supabase project URL
# Get from: Supabase Dashboard → Project Settings → API → Project URL
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# Supabase anonymous key (public, safe for client-side)
# Get from: Supabase Dashboard → Project Settings → API → anon public
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key

# Supabase service role key (secret, server-side only)
# Get from: Supabase Dashboard → Project Settings → API → service_role
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ============================================
# STRIPE BILLING (REQUIRED)
# ============================================
# Stripe secret key (server-side only)
# Get from: Stripe Dashboard → Developers → API Keys → Secret key
# Use test key (sk_test_...) for development, live key (sk_live_...) for production
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key

# Stripe publishable key (public, safe for client-side)
# Get from: Stripe Dashboard → Developers → API Keys → Publishable key
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key

# Stripe webhook secret for signature verification
# Get from: Stripe Dashboard → Developers → Webhooks → Signing secret
# Webhook URL: https://your-domain.com/api/stripe/webhooks
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Stripe Price IDs (run: npx ts-node scripts/create-stripe-products.ts)
STRIPE_BASIC_PRICE_ID=price_basic_monthly
STRIPE_BASIC_YEARLY_PRICE_ID=price_basic_yearly
STRIPE_BASIC_SETUP_FEE_ID=price_basic_setup
STRIPE_PRO_PRICE_ID=price_pro_monthly
STRIPE_PRO_YEARLY_PRICE_ID=price_pro_yearly
STRIPE_PRO_SETUP_FEE_ID=price_pro_setup
STRIPE_WHATSAPP_ADDON_PRICE_ID=price_whatsapp_addon

# ============================================
# PILAR AI LAYER (REQUIRED - at least one provider)
# ============================================
# OpenAI API key (primary AI provider)
# Get from: OpenAI Platform → API Keys
# Used for: WhatsApp AI, Phone AI, Email AI, Lead classification
OPENAI_API_KEY=sk-your-openai-api-key

# Groq API key (optional fallback provider - faster, cheaper)
# Get from: console.groq.com → API Keys
GROQ_API_KEY=

# Anthropic API key (optional fallback provider - Claude models)
# Get from: console.anthropic.com → API Keys
ANTHROPIC_API_KEY=

# ============================================
# SECURITY & ENCRYPTION (REQUIRED)
# ============================================
# Encryption key for sensitive data (64-character hex string)
# Generate with: openssl rand -hex 32
ENCRYPTION_KEY=your-64-character-hex-encryption-key-generate-with-openssl-rand-hex-32

# NextAuth secret for session encryption
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=your-nextauth-secret-generate-with-openssl-rand-base64-32

# ============================================
# APPLICATION SETTINGS (REQUIRED)
# ============================================
# Public URL of your application
# Development: http://localhost:3000
# Production: https://your-domain.com
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Node environment
NODE_ENV=development

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# ============================================
# TWILIO - PHONE AI (OPTIONAL)
# ============================================
# Twilio Account SID
# Get from: Twilio Console → Account Info
TWILIO_ACCOUNT_SID=

# Twilio Auth Token
TWILIO_AUTH_TOKEN=

# Twilio phone number (E.164 format: +1234567890)
TWILIO_PHONE_NUMBER=

# ============================================
# WHATSAPP CLOUD API (OPTIONAL)
# ============================================
# WhatsApp Business API token
# Get from: Meta for Developers → WhatsApp → API Setup
WHATSAPP_API_TOKEN=

# WhatsApp Phone Number ID
WHATSAPP_PHONE_NUMBER_ID=

# WhatsApp webhook verify token (you create this)
WHATSAPP_VERIFY_TOKEN=

# WhatsApp Business Account ID (for advanced features)
WHATSAPP_BUSINESS_ACCOUNT_ID=

# ============================================
# ELEVENLABS - VOICE AI (OPTIONAL)
# ============================================
# ElevenLabs API key for voice selection
# Get from: elevenlabs.io → Profile → API Keys
ELEVENLABS_API_KEY=

# ============================================
# GOOGLE CALENDAR OAUTH (OPTIONAL)
# ============================================
# Google OAuth Client ID
# Get from: Google Cloud Console → APIs & Services → Credentials
GOOGLE_CLIENT_ID=

# Google OAuth Client Secret
GOOGLE_CLIENT_SECRET=

# Google OAuth redirect URI
GOOGLE_REDIRECT_URI=http://localhost:3000/api/auth/google/callback

# ============================================
# EMAIL - IMAP/SMTP (OPTIONAL)
# ============================================
# Email credentials for inbox sync
EMAIL_USER=
EMAIL_PASSWORD=

# IMAP settings (Gmail: imap.gmail.com:993)
EMAIL_IMAP_HOST=imap.gmail.com
EMAIL_IMAP_PORT=993

# SMTP settings (Gmail: smtp.gmail.com:587)
EMAIL_SMTP_HOST=smtp.gmail.com
EMAIL_SMTP_PORT=587
EMAIL_SMTP_SECURE=false

# Contact form settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASS=
SMTP_FROM=PILAR SYSTEMS <no-reply@pilarsystems.com>
CONTACT_TO=hello@pilarsystems.com
CONTACT_EMAIL_ENABLED=true

# ============================================
# N8N WORKFLOW AUTOMATION (OPTIONAL)
# ============================================
# n8n webhook base URL
N8N_WEBHOOK_URL=
N8N_API_KEY=

# ============================================
# RATE LIMITING - UPSTASH REDIS (OPTIONAL)
# ============================================
# Required for production to prevent abuse
# Get from: Upstash Console → Create Database → REST API
RATE_LIMIT_REDIS_URL=
RATE_LIMIT_REDIS_TOKEN=

# Alternative names (same values)
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=

# ============================================
# AFFILIATE SYSTEM (OPTIONAL)
# ============================================
AFFILIATES_ENABLED=true
AFFILIATE_AUTO_APPROVE=false
AFFILIATE_COMMISSION_SETUP=10
AFFILIATE_COMMISSION_RECURRING=10

# ============================================
# ADMIN ACCESS (OPTIONAL)
# ============================================
# Comma-separated list of admin email addresses
ADMIN_EMAILS=admin@pilarsystems.com

# ============================================
# VERCEL (AUTO-SET IN PRODUCTION)
# ============================================
# These are automatically set by Vercel
# VERCEL=1
# VERCEL_ENV=production
# VERCEL_URL=your-deployment-url.vercel.app

# ============================================
# SETUP CHECKLIST
# ============================================
# [ ] Copy to .env.local: cp .env.example .env.local
# [ ] Fill in REQUIRED values (marked above)
# [ ] Generate security keys: openssl rand -hex 32 && openssl rand -base64 32
# [ ] Install: yarn install
# [ ] Generate Prisma: npx prisma generate
# [ ] Migrate DB: npx prisma migrate dev
# [ ] Create Stripe products: npx ts-node scripts/create-stripe-products.ts
# [ ] Start: yarn dev
# [ ] Test: Signup → Checkout → Onboarding → Dashboard
# [ ] Configure webhooks (Stripe, Twilio, WhatsApp)
# [ ] Deploy to Vercel with all ENV variables
